
name: 部署文檔

on:
    push:
        branches:
            # 確保這是你正在使用的分支名稱
            - main

jobs:
    deploy-gh-pages:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v3
              with:
                  fetch-depth: 0
                  # 如果你文檔需要 Git 子模組，取消註釋下一行
                  # submodules: true

            - name: 安裝 pnpm
              uses: pnpm/action-setup@v2
              with:
                  run_install: true


            - name: 設置 Node.js
              uses: actions/setup-node@v3
              with:
                  node-version: 18
                  cache: pnpm


            - name: 構建文檔
              env:
                  NODE_OPTIONS: --max_old_space_size=8192
              run: |-
                  pnpm run docs:build
                  > src/.vuepress/dist/.nojekyll

            - name: 部署文檔
              uses: JamesIves/github-pages-deploy-action@v4
              with:
                  # 這是文檔部署到的分支名稱
                  branch: gh-pages
                  folder: src/.vuepress/dist
